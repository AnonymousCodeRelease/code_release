import base64
import os.path
import pickle

import numpy as np

winrate_model_b64 = b"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"


cpLookup = {
    "-10.0": 0.16874792794783955,
    "-9.9": 0.16985049833887045,
    "-9.8": 0.17055738720598324,
    "-9.7": 0.17047675058336964,
    "-9.6": 0.17062880930380164,
    "-9.5": 0.17173295708238823,
    "-9.4": 0.1741832515174232,
    "-9.3": 0.17496583875894223,
    "-9.2": 0.17823840614328434,
    "-9.1": 0.17891311823785128,
    "-9.0": 0.18001756037367211,
    "-8.9": 0.18238828856575562,
    "-8.8": 0.18541818422621015,
    "-8.7": 0.18732127851231173,
    "-8.6": 0.188595528612019,
    "-8.5": 0.19166809721845357,
    "-8.4": 0.18989033973470404,
    "-8.3": 0.19357848980722225,
    "-8.2": 0.195212660943061,
    "-8.1": 0.1985674406526584,
    "-8.0": 0.20401430566976098,
    "-7.9": 0.2053494594581885,
    "-7.8": 0.2095001157139551,
    "-7.7": 0.2127603864858716,
    "-7.6": 0.21607609694057794,
    "-7.5": 0.21973060624595708,
    "-7.4": 0.2228248514176221,
    "-7.3": 0.22299885811455433,
    "-7.2": 0.22159517034121434,
    "-7.1": 0.2253474128373214,
    "-7.0": 0.22700275966883976,
    "-6.9": 0.2277978270416834,
    "-6.8": 0.23198254537369023,
    "-6.7": 0.23592594616253237,
    "-6.6": 0.24197398088661215,
    "-6.5": 0.24743721350483228,
    "-6.4": 0.2504634951693775,
    "-6.3": 0.25389828445048646,
    "-6.2": 0.2553693799097443,
    "-6.1": 0.2574747677153313,
    "-6.0": 0.26099610941165985,
    "-5.9": 0.26359484469524885,
    "-5.8": 0.26692516804140987,
    "-5.7": 0.269205898445802,
    "-5.6": 0.2716602975482676,
    "-5.5": 0.2762577909143481,
    "-5.4": 0.27686670371314326,
    "-5.3": 0.2811527494908349,
    "-5.2": 0.2842962444080047,
    "-5.1": 0.28868260131133583,
    "-5.0": 0.2914459750278813,
    "-4.9": 0.29552500948265914,
    "-4.8": 0.29889111624248266,
    "-4.7": 0.30275330907688625,
    "-4.6": 0.30483684697544633,
    "-4.5": 0.3087308954422261,
    "-4.4": 0.3119607377503364,
    "-4.3": 0.3149431542506458,
    "-4.2": 0.31853131804955126,
    "-4.1": 0.320778152372042,
    "-4.0": 0.32500585429582063,
    "-3.9": 0.3287550205647155,
    "-3.8": 0.3302152905962328,
    "-3.7": 0.3337414440782651,
    "-3.6": 0.3371096329087784,
    "-3.5": 0.3408372806176929,
    "-3.4": 0.3430467389812629,
    "-3.3": 0.345358794898586,
    "-3.2": 0.3488968896485116,
    "-3.1": 0.35237319918137733,
    "-3.0": 0.354602162593592,
    "-2.9": 0.35921288506416393,
    "-2.8": 0.3620978187487768,
    "-2.7": 0.36570889434391574,
    "-2.6": 0.36896483582772577,
    "-2.5": 0.3738375709360098,
    "-2.4": 0.37755946149735364,
    "-2.3": 0.38083501393471353,
    "-2.2": 0.3841356210618174,
    "-2.1": 0.38833097169521236,
    "-2.0": 0.3913569664390527,
    "-1.9": 0.39637664590926824,
    "-1.8": 0.4006706381318188,
    "-1.7": 0.40568723118901173,
    "-1.6": 0.4112309032143989,
    "-1.5": 0.4171285506703859,
    "-1.4": 0.422533096069275,
    "-1.3": 0.4301262113278628,
    "-1.2": 0.4371930420830884,
    "-1.1": 0.44297556987180564,
    "-1.0": 0.4456913220302985,
    "-0.9": 0.4524847690277852,
    "-0.8": 0.4589667426852546,
    "-0.7": 0.46660356893847554,
    "-0.6": 0.47734553584312966,
    "-0.5": 0.4838742651753062,
    "-0.4": 0.4949662422107537,
    "-0.3": 0.5052075551297714,
    "-0.2": 0.5134173311516534,
    "-0.1": 0.5243603487770374,
    "-0.0": 0.526949638981131,  # 0.5606402112975601,
    "0.1": 0.5295389291852245,
    "0.2": 0.5664296189371014,
    "0.3": 0.5748717155242605,
    "0.4": 0.5869360163496304,
    "0.5": 0.5921709270831235,
    "0.6": 0.6012651707026009,
    "0.7": 0.6088638279243903,
    "0.8": 0.6153816495064385,
    "0.9": 0.6213113677421394,
    "1.0": 0.6271095095579187,
    "1.1": 0.632804166473034,
    "1.2": 0.6381911052846212,
    "1.3": 0.6442037744916549,
    "1.4": 0.649365491330027,
    "1.5": 0.6541269394628821,
    "1.6": 0.6593775707102116,
    "1.7": 0.6642844357446305,
    "1.8": 0.6680323879474359,
    "1.9": 0.6719097160994534,
    "2.0": 0.6748374005101319,
    "2.1": 0.6783363422342483,
    "2.2": 0.6801467867275195,
    "2.3": 0.684829276628467,
    "2.4": 0.6867513620895516,
    "2.5": 0.6905527274606579,
    "2.6": 0.6926332976777145,
    "2.7": 0.6952680187678887,
    "2.8": 0.7001656575385784,
    "2.9": 0.7010142788018504,
    "3.0": 0.7047537668053925,
    "3.1": 0.7073295468984271,
    "3.2": 0.7106392738949507,
    "3.3": 0.7116862871579852,
    "3.4": 0.7149981105354425,
    "3.5": 0.7168150290640533,
    "3.6": 0.7181645290803663,
    "3.7": 0.7215706104143079,
    "3.8": 0.7257548871790502,
    "3.9": 0.7266799478667236,
    "4.0": 0.7312566255649167,
    "4.1": 0.7338343990993276,
    "4.2": 0.7363492332937249,
    "4.3": 0.7374945601492073,
    "4.4": 0.7413387385114591,
    "4.5": 0.7466896678519318,
    "4.6": 0.7461156227069248,
    "4.7": 0.7500348334958896,
    "4.8": 0.7525591569082364,
    "4.9": 0.7567349424376287,
    "5.0": 0.7596581998583797,
    "5.1": 0.7621623413577621,
    "5.2": 0.7644432506942895,
    "5.3": 0.7668438338565464,
    "5.4": 0.7697341715213551,
    "5.5": 0.7718264040129471,
    "5.6": 0.774903252738822,
    "5.7": 0.777338112750803,
    "5.8": 0.7782543748612702,
    "5.9": 0.7815446531238023,
    "6.0": 0.7817240741095305,
    "6.1": 0.7843444714897749,
    "6.2": 0.7879064312243436,
    "6.3": 0.7894336918448414,
    "6.4": 0.7906807160826923,
    "6.5": 0.7958175057898639,
    "6.6": 0.799001778895725,
    "6.7": 0.8059773285734155,
    "6.8": 0.8073085278260186,
    "6.9": 0.8079169497726442,
    "7.0": 0.8094553564231399,
    "7.1": 0.812049156586624,
    "7.2": 0.8080964608399982,
    "7.3": 0.8089371589128438,
    "7.4": 0.811884066397279,
    "7.5": 0.8139355726992591,
    "7.6": 0.8176447870147248,
    "7.7": 0.8205118056812014,
    "7.8": 0.8239310183322626,
    "7.9": 0.8246215704824976,
    "8.0": 0.8282444028473858,
    "8.1": 0.8307566922119521,
    "8.2": 0.8299970989266028,
    "8.3": 0.8329910434137715,
    "8.4": 0.8348790035853562,
    "8.5": 0.8354299179013772,
    "8.6": 0.838042734118834,
    "8.7": 0.8386288753155167,
    "8.8": 0.8403357337021318,
    "8.9": 0.8438203836486884,
    "9.0": 0.8438217313242881,
    "9.1": 0.8451134380453753,
    "9.2": 0.8456384082100551,
    "9.3": 0.844182520663178,
    "9.4": 0.8463847100484717,
    "9.5": 0.8479706716538067,
    "9.6": 0.8511321531494442,
    "9.7": 0.8506127153603494,
    "9.8": 0.8490128260556276,
    "9.9": 0.8522167487684729,
    "10.0": 0.8518353443061348,
}

cpLookup = {float(k): wr for k, wr in cpLookup.items()}


def cp_to_winrate(cp, allow_nan=False):
    try:
        cp = int(float(cp) * 10) / 10
    except OverflowError:
        return float("nan")
    except ValueError:
        # This can be caused by a bunch of other things too so this option is dangerous
        if allow_nan:
            return float("nan")
        else:
            raise
    try:
        return cpLookup[cp]
    except KeyError:
        return float("nan")


wr_predmodel = None

# Old polynomial model values
cp_poly_fit_vals = np.array(
    [
        3.38395029e-09,
        1.32065228e-08,
        -2.97493351e-05,
        -9.41367715e-05,
        9.49753199e-02,
        6.45777229e-02,
    ]
)


def cp_to_winrate_broken(cp: float) -> float:
    global wr_predmodel
    if wr_predmodel is None:
        wr_predmodel = pickle.loads(base64.b64decode(winrate_model_b64))
    if cp < -10:
        delta_per = (-cp - 10) / 90
        return max(cpLookup[-10.0] - delta_per * (0.0001 + cpLookup[-10.0]), 0.0001)
    elif cp > 10:
        delta_per = (cp - 10) / 90
        return min(cpLookup[10.0] + delta_per * (0.9999 - cpLookup[10.0]), 0.9999)
    else:
        return wr_predmodel.predict(np.array([[cp]]))[0]
